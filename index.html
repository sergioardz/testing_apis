<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Testing APIs</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>

<body>
    <div id="buttons">
        <button id="select">Select</button>
        <button id="current">Current</button>
        <button id="random">Random</button>
    </div>
    <div id="results1"></div>
    <div id="results2"></div>
    <div id="results3"></div>

    <script>

        // Current
        var queryURLIP = "https://api.ipify.org?";
        // console.log(queryURLIP);

        const apiKeyIP = "at_knMW8P4hXMF72fVn0z8jG2ZnwPsAy";

        $("#current").on("click", getcurrentIP);

        function getcurrentIP() {
            $.ajax({
                url: queryURLIP, method: "GET"
            })
                .done(function (response) {
                    console.log(response);
                    var currentIP = response;
                    $.ajax({
                        url: "https://geo.ipify.org/api/v1",
                        dataType: "json",
                        data: { apiKey: apiKeyIP, ipAddress: currentIP }
                    })
                        .done(function (response) {
                            console.log("Ciudad: " + response.location.city);
                            $("#results2").text("Current Location: " + response.location.city);
                            console.log(response);
                        })
                })
        }

        // Select Location

        var allLocations = [];

        $.getJSON("Locations.json", function(response){
            console.log(response.data[0].id);
        })

        $.getJSON("alldata.json", function(response){
            console.log(response.data.length);
            for (i = 0; i < response.data.length; i++) {
                allLocations.push(response.data[i].id);
            }
            console.log(allLocations.length);
            var randomIndex = Math.floor(Math.random() * allLocations.length);
            var randomID = allLocations[randomIndex];
            console.log("Beer name: " + response.data[randomIndex].name);
            console.log("Category: " + response.data[randomIndex].style.category.name);
            console.log("Style: " + response.data[randomIndex].style.name);
        })

        // Random

        // const apikeyBDB = "/?key=9968a2f544553322a8a49f3fb2916c09";
        // var baseURL = "https://sandbox-api.brewerydb.com/v2/";
        // var randomBeer = "beer/random";
        // var queryURLrandom = baseURL + randomBeer + apikeyBDB + "&withBreweries=Y";
        // console.log(queryURLrandom);
        // var locations = [];

        // $.ajax({
        //     url: queryURLrandom
        // })
        //     .done(function (response) {
        //         console.log(response);
        //         $("#results3").text("Beer Selected: " + response.data);
        //     })

    </script>


</body>

</html>